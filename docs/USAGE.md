# Deployment Process

To explain the deployment process in detail, we will go step by step.

Before you start, it's important to understand the components of the infrastructure and the requirements for the project. Please review the following documentation files:

- [INFRASTRUCTURE.md](INFRASTRUCTURE.md) – To understand the components of the infrastructure.
- [REQUIREMENTS.md](REQUIREMENTS.md) – To review the project requirements.
- [CLI.md](CLI.md) – To understand how the CLI tool works.

---

## Step-by-Step Deployment Process

### 1. Install Requirements
Start by installing all the dependencies listed in the [REQUIREMENTS.md](REQUIREMENTS.md) file.

### 2. Configure Environment Variables
Next, configure your environment variables by referencing the `.env.example` file. This file will provide the necessary template for your configuration.

### 3. Deploy Infrastructure
Once your environment variables are configured, run the `werserk.py` script to deploy the infrastructure. This will initiate the deployment process, which may take some time, so please be patient.

```bash	
python3 werserk.py --all
```

### 4. Create Deployment Configuration
After the infrastructure is deployed, go to your project directory and create a `whanos.yml` file in the root of your project. This file will define the deployment configuration.

You can reference the [whanos.template.yml](../whanos.template.yml) file to see the expected structure of the `whanos.yml` file.

### 5. Set Up Jenkins Pipeline
Next, log into your Jenkins interface and link your repository to the Jenkins pipeline by using the "Link Project" job. This setup ensures that the pipeline will be triggered automatically whenever you push to your repository.

After setting this up, your project will appear in the "Projects" folder in Jenkins.

### 6. Push to Repository
Now, push your changes to the repository. This will trigger the Jenkins pipeline, which will:

- Build your application.
- Push the application to the registry.
- Deploy it to the Kubernetes cluster.

Once the process is complete, your application will be successfully deployed to the Kubernetes cluster.

---

## Deployment Configuration

The deployment configuration is managed through the `terraform.tfvars` file. This file is generated by the `werserk.py` script and contains all necessary variables for the deployment.

You can view the `terraform.tfvars` file to check the specific configuration used for the deployment.

---

## Cluster Configuration

To see the configuration of the deployed cluster, navigate to the `terraform/cluster/main.tf` file. This file contains the cluster configuration, including:

- The number of nodes
- The machine type
- The region
- And other cluster details

---

## Using a Dockerfile

If you'd like to configure your runtime environment using a Dockerfile, create a `Dockerfile` in the root of your project. The Jenkins pipeline will automatically detect the Dockerfile and build the image accordingly.

We currently support the following programming languages:

- Python
- Java
- JavaScript
- Befunge
- C

If you'd like to use one of our pre-built base images, they are named as follows: `whanos-<language>`. You can find the available images in the `images` folder.

---

That's it! You've successfully deployed your infrastructure and application to the Kubernetes cluster.
